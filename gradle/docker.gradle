jib {
    from {
        image = 'adoptopenjdk/openjdk11:alpine-slim'
    }

    to {
        image = 'harbor.metroscope.tech/dev/comment'
        tags = [project.version] as List<String>
        auth {
            username = "$System.env.REGISTRY_USER"
            password = "$System.env.REGISTRY_PASSWORD"
        }
    }

    container {
        jvmFlags = ['-Dspring.profiles.active=prod', "-Djava.security.egd=file:/dev/./urandom", "-Dhibernate.types.print.banner=false"]
        creationTime = 'USE_CURRENT_TIMESTAMP'
    }
}
